<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-10-24T03:30:18.612540756"><title>Database: Getting Started | Elegant</title><script type="application/json" id="virtual-toc-data">[{"id":"introduction","level":0,"title":"Introduction","anchor":"#introduction"},{"id":"configuration","level":0,"title":"Configuration","anchor":"#configuration"},{"id":"executing-sql-queries","level":0,"title":"Executing SQL Queries","anchor":"#executing-sql-queries"},{"id":"parameter-binding","level":0,"title":"Parameter Binding","anchor":"#parameter-binding"},{"id":"database-transactions","level":0,"title":"Database Transactions","anchor":"#database-transactions"},{"id":"closing-connections","level":0,"title":"Closing Connections","anchor":"#closing-connections"},{"id":"next-steps","level":0,"title":"Next Steps","anchor":"#next-steps"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><link href="static/custom.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Database: Getting Started | Elegant"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Elegant Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/getting-started.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Database: Getting Started | Elegant"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/getting-started.html#webpage",
    "url": "writerside-documentation/getting-started.html",
    "name": "Database: Getting Started | Elegant",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Elegant Help"
}</script><!-- End Schema.org --></head><body data-id="Getting-Started" data-main-title="Database: Getting Started" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Database"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Elegant  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Getting-Started" id="Getting-Started.md">Database: Getting Started</h1><section class="chapter"><h2 id="introduction" data-toc="introduction">Introduction</h2><p id="-95t8pd_11">Modern applications depend on reliable, efficient database interactions. Elegant simplifies this process by providing a clean, expressive interface for working with databases. Whether you need raw SQL power, a fluent query builder, or an elegant ORM, this toolkit has you covered.</p><p id="-95t8pd_12">Elegant offers native support for four popular database systems:</p><ul class="list _bullet" id="-95t8pd_13"><li class="list__item" id="-95t8pd_14"><p id="-95t8pd_18"><span class="control" id="-95t8pd_19">MySQL</span> - The world's most popular open-source database</p></li><li class="list__item" id="-95t8pd_15"><p id="-95t8pd_20"><span class="control" id="-95t8pd_21">MariaDB</span> - A performance-enhanced MySQL fork</p></li><li class="list__item" id="-95t8pd_16"><p id="-95t8pd_22"><span class="control" id="-95t8pd_23">PostgreSQL</span> - Advanced open-source relational database</p></li><li class="list__item" id="-95t8pd_17"><p id="-95t8pd_24"><span class="control" id="-95t8pd_25">SQLite</span> - Lightweight, file-based database perfect for development</p></li></ul></section><section class="chapter"><h2 id="configuration" data-toc="configuration">Configuration</h2><section class="chapter"><h3 id="setting-up-your-database-connection" data-toc="setting-up-your-database-connection">Setting Up Your Database Connection</h3><p id="-95t8pd_28">Database configuration is managed through the <code class="code" id="-95t8pd_31">elegant.config.js</code> file in your project root. This file defines your database connections and specifies which one to use by default.</p><p id="-95t8pd_29">Here's a complete configuration example:</p><div class="code-block" data-lang="javascript">
export default {
  default: 'mysql',
  connections: {
    mysql: {
      dialect: 'mysql',
      host: process.env.DB_HOST || 'localhost',
      port: parseInt(process.env.DB_PORT) || 3306,
      database: process.env.DB_DATABASE,
      user: process.env.DB_USER,
      password: process.env.DB_PASSWORD
    },
    postgres: {
      dialect: 'postgres',
      host: process.env.PG_HOST || 'localhost',
      port: parseInt(process.env.PG_PORT) || 5432,
      database: process.env.PG_DATABASE,
      user: process.env.PG_USER,
      password: process.env.PG_PASSWORD
    },

    sqlite: {
      dialect: 'sqlite',
      database: 'database/database.sqlite'
    }
  },
  migrations: {
    table: 'migrations',
    directory: 'resources/database/migrations',
  },
}
</div></section><section class="chapter"><h3 id="environment-variables" data-toc="environment-variables">Environment Variables</h3><p id="-95t8pd_32">It's best practice to store sensitive database credentials in environment variables. Create a <code class="code" id="-95t8pd_37">.env</code> file in your project root:</p><div class="code-block" data-lang="none">
DB_HOST=localhost
DB_PORT=3306
DB_DATABASE=my_database
DB_USER=my_user
DB_PASSWORD=my_password
</div><p id="-95t8pd_34">You may override the default config and migrations path with Elegant specific environment variables.</p><div class="code-block" data-lang="bash">
ELEGANT_CONFIG_PATH=relative/path/elegant.config.js
ELEGANT_MIGRATION_DIR=relative/path/to/migrations
</div><aside class="prompt" data-type="note" data-title="" id="-95t8pd_36"><p id="-95t8pd_38"><span class="control" id="-95t8pd_40">Quick Setup Tip</span></p><p id="-95t8pd_39">Run <code class="code" id="-95t8pd_41">elegant init</code> and select SQLite to automatically create the database file and run initial migrations.</p></aside></section></section><section class="chapter"><h2 id="executing-sql-queries" data-toc="executing-sql-queries">Executing SQL Queries</h2><section class="chapter"><h3 id="establishing-a-connection" data-toc="establishing-a-connection">Establishing a Connection</h3><p id="-95t8pd_49">Before running queries, establish a connection to your database:</p><div class="code-block" data-lang="ts">
import Elegant from '@pristine/elegant';
const db = await Elegant.connection();
</div><p id="-95t8pd_51">In most applications, a single database instance is created and shared across multiple services throughout the application lifecycle. Elegant elegantly implements the singleton design pattern to ensure efficient resource management and connection reuse:</p><div class="code-block" data-lang="ts">
const db = await Elegant.singleton();
</div><p id="-95t8pd_53">To use a specific connection (other than the default):</p><div class="code-block" data-lang="ts">
const db = await Elegant.connection('postgres');
</div><p id="-95t8pd_55">Gracefully disconnect from all pooled Elegant database instances that were instantiated using the singleton method:</p><div class="code-block" data-lang="ts">
const db = await Elegant.connection()
await db.disconnect()
</div><p id="-95t8pd_57">Disconnect from all Elegant database instances that were created with the <code class="code" id="-95t8pd_59">singleton</code> method:</p><div class="code-block" data-lang="ts">
await Elegant.disconnect()
</div></section><section class="chapter"><h3 id="select-queries" data-toc="select-queries">SELECT Queries</h3><p id="-95t8pd_60">Retrieve data using the <code class="code" id="-95t8pd_65">select</code> method:</p><div class="code-block" data-lang="ts">
import Elegant from '@pristine/elegant';
const db = await Elegant.connection(); 
const users = await db.select('SELECT * FROM users WHERE active = ?', [true]);
</div><p id="-95t8pd_62"><span class="control" id="-95t8pd_66">Parameters:</span></p><ul class="list _bullet" id="-95t8pd_63"><li class="list__item" id="-95t8pd_67"><p id="-95t8pd_69">First argument: SQL query string</p></li><li class="list__item" id="-95t8pd_68"><p id="-95t8pd_70">Second argument: Array of parameter bindings</p></li></ul><p id="-95t8pd_64">The <code class="code" id="-95t8pd_71">select</code> method returns an array of results. Each result is a plain object with column names as properties.</p></section><section class="chapter"><h3 id="type-safe-queries" data-toc="type-safe-queries">Type-Safe Queries</h3><p id="-95t8pd_72">Leverage TypeScript's type system for better code safety and IDE support:</p><div class="code-block" data-lang="ts">
interface User { 
  id: number; 
  name: string; 
  email: string; 
  active: boolean; 
}
const users = await db.select&lt;User&gt;( 'SELECT * FROM users WHERE active = ?', [true] );
  // TypeScript now knows the structure of users 
   users.forEach(user =&gt; { console.log(user.email); // Type-safe access 
});
</div></section><section class="chapter"><h3 id="retrieving-scalar-values" data-toc="retrieving-scalar-values">Retrieving Scalar Values</h3><p id="-95t8pd_74">When you need a single value instead of a full result set, use the <code class="code" id="-95t8pd_76">scalar</code> method:</p><div class="code-block" data-lang="ts">
const maxId = await db.scalar ('SELECT MAX(id) FROM users'); 
const userCount = await db.scalar('SELECT COUNT(*) FROM users WHERE active = ?', [true]);
</div></section><section class="chapter"><h3 id="update-queries" data-toc="update-queries">UPDATE Queries</h3><p id="-95t8pd_77">Modify existing records with the <code class="code" id="-95t8pd_79">update</code> method, which returns the number of affected rows:</p><div class="code-block" data-lang="ts">
const affectedRows = await db.update( 'UPDATE users SET last_login = NOW() WHERE email = ?', ['user@example.com'] );
console.log(`Updated ${affectedRows} user(s)`);
</div></section><section class="chapter"><h3 id="delete-queries" data-toc="delete-queries">DELETE Queries</h3><p id="-95t8pd_80">Remove records using the <code class="code" id="-95t8pd_82">delete</code> method:</p><div class="code-block" data-lang="ts">
const deletedRows = await db.delete(`DELETE FROM users WHERE is_active = 0`);
console.log(`Cleaned up ${deletedRows} expired session(s)`);
</div></section><section class="chapter"><h3 id="raw-queries-without-binding" data-toc="raw-queries-without-binding">Raw Queries Without Binding</h3><div class="code-block" data-lang="ts">
const result = await db.select('SELECT * FROM users LIMIT 10');
</div><aside class="prompt" data-type="warning" data-title="" id="-95t8pd_84"><p id="-95t8pd_85"><span class="control" id="-95t8pd_87">Security Warning</span></p><p id="-95t8pd_86">Queries without parameter binding are vulnerable to SQL injection attacks. Never use user input directly in unprepared statements. Always use parameterized queries when dealing with user-provided data.</p></aside></section></section><section class="chapter"><h2 id="parameter-binding" data-toc="parameter-binding">Parameter Binding</h2><p id="-95t8pd_88">Elegant uses parameterized queries to protect against SQL injection. Parameters are represented by <code class="code" id="-95t8pd_92">?</code> placeholders in your SQL:</p><div class="code-block" data-lang="ts">
// Safe - uses parameter binding 
const user = await db.select( 'SELECT * FROM users WHERE email = ?', [userInput] );
</div><div class="code-block" data-lang="ts">
// Dangerous - DO NOT DO THIS 
const email = 'no@email.com'
const user = await db.select(`SELECT * FROM users WHERE email = '${email}'`)
</div><section class="chapter"><h3 id="accessing-the-underlying-driver" data-toc="accessing-the-underlying-driver">Accessing the Underlying Driver</h3><p id="-95t8pd_93">For advanced use cases, access the raw database driver:</p><div class="code-block" data-lang="ts">
const db = await Elegant.connection(); 
const rawConnection = db.connection;
// Now you can use driver-specific features
</div></section></section><section class="chapter"><h2 id="database-transactions" data-toc="database-transactions">Database Transactions</h2><p id="-95t8pd_95">Transactions ensure data integrity by grouping multiple operations into an atomic unit:</p><div class="code-block" data-lang="ts">
const db = await Elegant.connection();
await db.transaction(async (trx) =&gt; {
  await trx.insert('INSERT INTO orders (user_id, total) VALUES (?, ?)', [userId, total]);
  await trx.update('UPDATE inventory SET quantity = quantity - ? WHERE product_id = ?', [qty, productId]);
  await trx.insert('INSERT INTO order_items (order_id, product_id) VALUES (?, ?)', [orderId, productId]);
});
</div><p id="-95t8pd_97">Manual transaction control:</p><div class="code-block" data-lang="ts">
const db = await Elegant.connection();
await db.beginTransaction();
try {
  await db.insert('INSERT INTO accounts (name) VALUES (?)', ['Savings']);
  await db.update('UPDATE balances SET amount = amount - ? WHERE id = ?', [100, 1]);
  await db.commit();
} catch (error) {
  await db.rollback();
  throw error;
}
</div><aside class="prompt" data-type="warning" data-title="" id="-95t8pd_99"><p id="-95t8pd_100"><span class="control" id="-95t8pd_103">Important: Implicit Commits</span></p><p id="-95t8pd_101">Some SQL statements trigger implicit commits that cannot be rolled back. These include DDL statements like <code class="code" id="-95t8pd_104">CREATE TABLE</code>, <code class="code" id="-95t8pd_105">DROP TABLE</code>, <code class="code" id="-95t8pd_106">ALTER TABLE</code>, etc. Avoid these statements within transactions unless you understand their implications.</p><p id="-95t8pd_102">Refer to your database documentation for a complete list of statements that cause implicit commits.</p></aside></section><section class="chapter"><h2 id="closing-connections" data-toc="closing-connections">Closing Connections</h2><p id="-95t8pd_107">Close database connections when your application shuts down:</p><div class="code-block" data-lang="ts">
const db = await Elegant.connection();
// ... perform database operations ...
await db.close();
</div></section><section class="chapter"><h2 id="next-steps" data-toc="next-steps">Next Steps</h2><p id="-95t8pd_109">Now that you understand the basics of database operations with Elegant, explore more advanced features:</p><ul class="list _bullet" id="-95t8pd_110"><li class="list__item" id="-95t8pd_111"><p id="-95t8pd_114"><a href="query-builder.html" id="-95t8pd_115" data-tooltip="Elegant's query builder provides an intuitive, fluent interface for constructing and executing database queries. Rather than writing raw SQL strings throughout your application, the query builder offers a chainable API that's both readable and maintainable.">Query Builder</a> - Build complex queries with a fluent interface</p></li><li class="list__item" id="-95t8pd_112"><p id="-95t8pd_116"><a href="migrations.html" id="-95t8pd_117" data-tooltip="Database migrations are version control for your database schema. They allow your team to define, share, and track changes to the database structure over time. With migrations, you can:">Migrations</a> - Version control for your database schema</p></li><li class="list__item" id="-95t8pd_113"><p id="-95t8pd_118"><a href="elegant-getting-started.html" id="-95t8pd_119" data-tooltip="The Elegant ORM (Object-Relational Mapper) transforms database tables into intuitive TypeScript classes, letting you work with database records as objects rather than writing raw SQL. This object-oriented approach makes your code more maintainable, readable, and enjoyable to write.">Elegant ORM</a> - Work with models instead of raw SQL</p></li></ul></section><div class="last-modified">24 October 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="installation.html" class="navigation-links__prev">Installation</a><a href="query-builder.html" class="navigation-links__next">Database: Query Builder</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>