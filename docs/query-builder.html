<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-10-26T04:06:33.526475346"><title>Database: Query Builder | Elegant</title><script type="application/json" id="virtual-toc-data">[{"id":"introduction","level":0,"title":"Introduction","anchor":"#introduction"},{"id":"why-use-the-query-builder","level":0,"title":"Why Use the Query Builder?","anchor":"#why-use-the-query-builder"},{"id":"basic-query-execution","level":0,"title":"Basic Query Execution","anchor":"#basic-query-execution"},{"id":"selecting-specific-columns","level":0,"title":"Selecting Specific Columns","anchor":"#selecting-specific-columns"},{"id":"filtering-results","level":0,"title":"Filtering Results","anchor":"#filtering-results"},{"id":"ordering-results","level":0,"title":"Ordering Results","anchor":"#ordering-results"},{"id":"limiting-results","level":0,"title":"Limiting Results","anchor":"#limiting-results"},{"id":"retrieving-single-records","level":0,"title":"Retrieving Single Records","anchor":"#retrieving-single-records"},{"id":"aggregate-methods","level":0,"title":"Aggregate Methods","anchor":"#aggregate-methods"},{"id":"joins","level":0,"title":"Joins","anchor":"#joins"},{"id":"grouping-results","level":0,"title":"Grouping Results","anchor":"#grouping-results"},{"id":"insert-operations","level":0,"title":"Insert Operations","anchor":"#insert-operations"},{"id":"update-operations","level":0,"title":"Update Operations","anchor":"#update-operations"},{"id":"delete-operations","level":0,"title":"Delete Operations","anchor":"#delete-operations"},{"id":"raw-expressions","level":0,"title":"Raw Expressions","anchor":"#raw-expressions"},{"id":"query-debugging","level":0,"title":"Query Debugging","anchor":"#query-debugging"},{"id":"best-practices","level":0,"title":"Best Practices","anchor":"#best-practices"},{"id":"next-steps","level":0,"title":"Next Steps","anchor":"#next-steps"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><link href="static/custom.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Database: Query Builder | Elegant"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Elegant Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/query-builder.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Database: Query Builder | Elegant"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/query-builder.html#webpage",
    "url": "writerside-documentation/query-builder.html",
    "name": "Database: Query Builder | Elegant",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Elegant Help"
}</script><!-- End Schema.org --></head><body data-id="Query-Builder" data-main-title="Database: Query Builder" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Database"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Elegant  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Query-Builder" id="Query-Builder.md">Database: Query Builder</h1><section class="chapter"><h2 id="introduction" data-toc="introduction">Introduction</h2><p id="nqco4b_22">Elegant's query builder provides an intuitive, fluent interface for constructing and executing database queries. Rather than writing raw SQL strings throughout your application, the query builder offers a chainable API that's both readable and maintainable.</p><p id="nqco4b_23">The query builder works seamlessly across all supported database systems (MySQL, MariaDB, PostgreSQL, and SQLite), allowing you to write database-agnostic code. All queries use parameter binding automatically, protecting your application from SQL injection vulnerabilities without any additional effort on your part.</p></section><section class="chapter"><h2 id="why-use-the-query-builder" data-toc="why-use-the-query-builder">Why Use the Query Builder?</h2><p id="nqco4b_24"><span class="control" id="nqco4b_29">Readability</span> - Queries read like natural language, making your code easier to understand and maintain.</p><p id="nqco4b_25"><span class="control" id="nqco4b_30">Safety</span> - Automatic parameter binding eliminates SQL injection risks.</p><p id="nqco4b_26"><span class="control" id="nqco4b_31">Database Agnostic</span> - Write once, run on any supported database system.</p><p id="nqco4b_27"><span class="control" id="nqco4b_32">Type Safety</span> - TypeScript integration provides autocomplete and type checking.</p><p id="nqco4b_28"><span class="control" id="nqco4b_33">Maintainability</span> - Changes to query logic are easier to implement and test.</p></section><section class="chapter"><h2 id="basic-query-execution" data-toc="basic-query-execution">Basic Query Execution</h2><section class="chapter"><h3 id="getting-started" data-toc="getting-started">Getting Started</h3><p id="nqco4b_38">Begin building queries by calling the <code class="code" id="nqco4b_40">table</code> method on your database connection:</p><div class="code-block" data-lang="ts">
import Elegant from '@pristine/elegant';
const db = await Elegant.connection(); 
const queryBuilder = db.table('users')
</div></section><section class="chapter"><h3 id="retrieving-all-records" data-toc="retrieving-all-records">Retrieving All Records</h3><p id="nqco4b_41">Use the <code class="code" id="nqco4b_44">get</code> method to fetch all rows from a table:</p><div class="code-block" data-lang="ts">
const db = await Elegant.connection(); 
const users = await db.table('users').get();
console.log(`Found ${users.length} users`);
</div><p id="nqco4b_43">The <code class="code" id="nqco4b_45">get</code> method returns a <code class="code" id="nqco4b_46">Collection</code> instance containing the query results. Each result is represented as a plain object.</p></section><section class="chapter"><h3 id="type-safe-results" data-toc="type-safe-results">Type-Safe Results</h3><p id="nqco4b_47">Leverage TypeScript generics to add type safety to your queries:</p><div class="code-block" data-lang="ts">
interface User { 
  id: number; 
  name: string; 
  email: string; 
  created_at: Date;
}
const db = await Elegant.connection();
const users = await db.table('users').get&lt;User&gt;();
// TypeScript knows the structure 
users.forEach(user =&gt; { 
  console.log(user.name); 
  // Type-safe property access 
});
</div></section><section class="chapter"><h3 id="accessing-result-data" data-toc="accessing-result-data">Accessing Result Data</h3><p id="nqco4b_49">Query results are plain objects with column names as properties:</p><div class="code-block" data-lang="ts">
const users = await db.table('users').get();
for (const user of users) { 
  console.log(`Name: ${user.name}`); 
  console.log(`Email: ${user.email}`); 
}
</div></section></section><section class="chapter"><h2 id="selecting-specific-columns" data-toc="selecting-specific-columns">Selecting Specific Columns</h2><section class="chapter"><h3 id="select-method" data-toc="select-method">Select Method</h3><p id="nqco4b_54">By default, queries return all columns (<code class="code" id="nqco4b_57">SELECT *</code>). Specify particular columns using the <code class="code" id="nqco4b_58">select</code> method:</p><section class="chapter"><h4 id="select-specific-columns-as-an-array" data-toc="select-specific-columns-as-an-array">Select specific columns as an array</h4><div class="code-block" data-lang="ts">
const users = await db 
  .table('users') 
  .select(['name', 'email']) 
  .get();

</div></section><section class="chapter"><h4 id="select-columns-as-comma-separated-string" data-toc="select-columns-as-comma-separated-string">Select columns as comma-separated string</h4><div class="code-block" data-lang="ts">
const users = await db 
  .table('users') 
  .select('name, email')
  .get();
</div></section></section><section class="chapter"><h3 id="column-aliases" data-toc="column-aliases">Column Aliases</h3><p id="nqco4b_61">Create column aliases in your queries:</p><div class="code-block" data-lang="ts">
const users = await db .table('users') 
  .select(['name', 'email as user_email']) 
  .get();
// Access using the alias 
users.forEach(user =&gt; { 
  console.log(user.user_email); 
});
</div></section><section class="chapter"><h3 id="aggregate-functions" data-toc="aggregate-functions">Aggregate Functions</h3><p id="nqco4b_63">Perform calculations using SQL aggregate functions:</p><div class="code-block" data-lang="ts">
// Count records const 
count = await db .table('users') 
  .select('COUNT(*) as total') 
  .first();
console.log(`Total users: ${count.total}`);
// Calculate sum 
const revenue = await db .table('orders') 
  .select('SUM(amount) as total_revenue') 
  .first();
// Get average 
const avgAge = await db .table('users') 
  .select('AVG(age) as average_age')
  .first();
</div></section></section><section class="chapter"><h2 id="filtering-results" data-toc="filtering-results">Filtering Results</h2><section class="chapter"><h3 id="where-clauses" data-toc="where-clauses">Where Clauses</h3><p id="nqco4b_71">Use the query builder's <code class="code" id="nqco4b_75">where</code> method to add conditional clauses to your queries. In its standard form, <code class="code" id="nqco4b_76">where</code> accepts three arguments: the column name, a comparison operator (any operator supported by your database), and the value to compare against.</p><div class="code-block" data-lang="ts">
// Basic where clause 
const activeUsers = await db
  .table('users') 
  .where('active', '=', true)
  .get();
// Multiple conditions 
const results = await db 
  .table('users') 
  .where('status', '=', 'active') 
  .and('subscription', '=', 'premium')
  .get();
</div><p id="nqco4b_73">For convenience, when checking equality, you can omit the operator and pass the value directly as the second argument. Elegant assumes the <code class="code" id="nqco4b_77">=</code> operator by default:</p><div class="code-block" data-lang="ts">
await db.table('users').where('name', 'jack').get()
</div></section><section class="chapter"><h3 id="comparison-operators" data-toc="comparison-operators">Comparison Operators</h3><p id="nqco4b_78">The query builder supports various comparison operators:</p><section class="chapter"><h4 id="greater-than" data-toc="greater-than">Greater than</h4><div class="code-block" data-lang="ts">
const seniors = await db 
  .table('users') 
  .where('age', '&gt;', 65) 
  .get();
</div></section><section class="chapter"><h4 id="less-than-or-equal" data-toc="less-than-or-equal">Less than or equal</h4><div class="code-block" data-lang="ts">
const juniors = await db 
  .table('employees') 
  .where('years_experience', '&lt;=', 2) 
  .get();
</div></section><section class="chapter"><h4 id="not-equal" data-toc="not-equal">Not equal</h4><div class="code-block" data-lang="ts">
const nonAdmins = await db 
  .table('users')
  .where('role', '!=', 'admin') 
  .get();
</div></section></section><section class="chapter"><h3 id="logical-operators" data-toc="logical-operators">Logical Operators</h3><p id="nqco4b_85">Combine conditions using logical operators:</p><section class="chapter"><h4 id="and-conditions-implicit" data-toc="and-conditions-implicit">AND conditions (implicit)</h4><div class="code-block" data-lang="ts">
const premiumActive = await db 
  .table('users') 
  .where('subscription', '=', 'premium') 
  .and('status', '=', 'active') 
  .get();
</div></section><section class="chapter"><h4 id="or-conditions" data-toc="or-conditions">OR conditions</h4><div class="code-block" data-lang="ts">
const results = await db
  .table('users') 
  .where('role', '=', 'admin') 
  .or('role', '=', 'moderator') 
  .get();
</div></section><section class="chapter"><h4 id="complex-conditions" data-toc="complex-conditions">Complex conditions</h4><div class="code-block" data-lang="ts">
const filtered = await db 
  .table('products') 
  .where('category', '=', 'electronics') 
  .and('price', '&lt;', 1000) 
  .or('featured', '=', true) 
  .get();
</div></section></section><section class="chapter"><h3 id="in-clauses" data-toc="in-clauses">IN Clauses</h3><p id="nqco4b_92">Check if a column value exists in a set:</p><div class="code-block" data-lang="ts">
const users = await db 
  .table('users') 
  .where('status', 'IN', ['active', 'pending', 'trial']) 
  .get();
// With numeric values 
const posts = await db .table('posts') 
  .where('category_id', 'IN', [1, 3, 5, 7]) 
  .get();
</div></section><section class="chapter"><h3 id="between-clauses" data-toc="between-clauses">BETWEEN Clauses</h3><p id="nqco4b_94">Filter values within a range:</p><div class="code-block" data-lang="ts">
const recentOrders = await db 
  .table('orders') 
  .where('total', 'BETWEEN', [100, 500]) 
  .get();
// Date ranges 
const thisMonth = await db 
  .table('events') 
  .where('event_date', 'BETWEEN', [startDate, endDate]) 
  .get();
</div></section><section class="chapter"><h3 id="null-checks" data-toc="null-checks">NULL Checks</h3><p id="nqco4b_96">Check for NULL or NOT NULL values:</p><div class="code-block" data-lang="ts">
// IS NULL 
const unverified = await db 
  .table('users') 
  .where('email_verified_at', 'IS', null) 
  .get();
// IS NOT NULL 
const verified = await db
  .table('users') 
  .where('email_verified_at', 'IS NOT', null) 
  .get();
</div></section></section><section class="chapter"><h2 id="ordering-results" data-toc="ordering-results">Ordering Results</h2><section class="chapter"><h3 id="order-by" data-toc="order-by">Order By</h3><p id="nqco4b_100">Sort query results using <code class="code" id="nqco4b_104">orderBy</code>:</p><section class="chapter"><h4 id="ascending-order-default" data-toc="ascending-order-default">Ascending order (default)</h4><div class="code-block" data-lang="ts">
const users = await db 
  .table('users') 
  .orderBy('name') 
  .get();
</div></section><section class="chapter"><h4 id="descending-order" data-toc="descending-order">Descending order</h4><div class="code-block" data-lang="ts">
const recentPosts = await db 
  .table('posts')
  .orderBy('created_at', 'DESC')
  .get();
</div></section><section class="chapter"><h4 id="multiple-columns" data-toc="multiple-columns">Multiple columns</h4><div class="code-block" data-lang="ts">
const sorted = await db 
  .table('products') 
  .orderBy('category') 
  .orderBy('price', 'DESC') 
  .get();
</div></section></section><section class="chapter"><h3 id="random-ordering" data-toc="random-ordering">Random Ordering</h3><p id="nqco4b_108">Retrieve records in random order:</p><div class="code-block" data-lang="ts">
const randomUsers = await db 
  .table('users') 
  .orderByRandom() 
  .limit(5) 
  .get();
</div></section></section><section class="chapter"><h2 id="limiting-results" data-toc="limiting-results">Limiting Results</h2><section class="chapter"><h3 id="limit" data-toc="limit">Limit</h3><p id="nqco4b_113">Restrict the number of records returned:</p><div class="code-block" data-lang="ts">
// Get first 10
const users = await db 
  .table('users') 
  .limit(10) 
  .get();
// Top 5 products by price 
const expensive = await db 
  .table('products')
  .orderBy('price', 'DESC') 
  .limit(5) 
  .get();
</div></section><section class="chapter"><h3 id="offset" data-toc="offset">Offset</h3><p id="nqco4b_115">Skip a specified number of records:</p><div class="code-block" data-lang="ts">
// Skip first 10, get next 10 
const users = await db 
  .table('users') 
  .offset(10) 
  .limit(10) 
  .get();
</div></section><section class="chapter"><h3 id="pagination" data-toc="pagination">Pagination</h3><p id="nqco4b_117">Implement pagination using <code class="code" id="nqco4b_119">limit</code> and <code class="code" id="nqco4b_120">offset</code>:</p><div class="code-block" data-lang="ts">
function paginate(page: number, perPage: number = 20) { 
  const offset = (page - 1) * perPage;
  return db .table('users') 
    .limit(perPage) 
    .offset(offset)
    .get();
}
// Get page 1 
const firstPage = await paginate(1, 20);
// Get page 3 
const thirdPage = await paginate(3, 20);
</div></section></section><section class="chapter"><h2 id="retrieving-single-records" data-toc="retrieving-single-records">Retrieving Single Records</h2><section class="chapter"><h3 id="first" data-toc="first">First</h3><p id="nqco4b_123">Get the first matching record:</p><div class="code-block" data-lang="ts">
const user = await db 
  .table('users') 
  .where('email', '=', 'john@example.com') 
  .first();
if (user) {
  console.log(user.name); 
} else { 
  console.log('User not found'); 
}
</div></section><section class="chapter"><h3 id="find-by-primary-key" data-toc="find-by-primary-key">Find by Primary Key</h3><p id="nqco4b_125">Retrieve a record by its primary key:</p><div class="code-block" data-lang="ts">
const user = await db 
  .table('users') 
  .find(42);
// Specify custom primary key column 
const product = await db 
  .table('products') 
  .find(100, 'product_id');
</div></section></section><section class="chapter"><h2 id="aggregate-methods" data-toc="aggregate-methods">Aggregate Methods</h2><section class="chapter"><h3 id="count" data-toc="count">Count</h3><p id="nqco4b_131">Count the number of records:</p><div class="code-block" data-lang="ts">
const userCount = await db.table('users').count();
console.log(`Total users: ${userCount}`);
// Count with conditions
const activeCount = await db 
  .table('users') 
  .where('status', '=', 'active') 
  .count();
</div></section><section class="chapter"><h3 id="min-and-max" data-toc="min-and-max">Min and Max</h3><p id="nqco4b_133">Find minimum and maximum values:</p><div class="code-block" data-lang="ts">
// Minimum price 
const minPrice = await db.table('products').min('price');
// Maximum age 
const maxAge = await db.table('users').max('age');
</div></section><section class="chapter"><h3 id="sum" data-toc="sum">Sum</h3><p id="nqco4b_135">Calculate the sum of a column:</p><div class="code-block" data-lang="ts">
const totalRevenue = await db 
  .table('orders') 
  .where('status', '=', 'completed') 
  .sum('amount');
console.log(`Revenue: $${totalRevenue}`);
</div></section><section class="chapter"><h3 id="average" data-toc="average">Average</h3><p id="nqco4b_137">Calculate the average value:</p><div class="code-block" data-lang="ts">
const avgRating = await db 
  .table('reviews') 
  .where('product_id', '=', 123) 
  .avg('rating');
</div></section></section><section class="chapter"><h2 id="joins" data-toc="joins">Joins</h2><section class="chapter"><h3 id="inner-join" data-toc="inner-join">Inner Join</h3><p id="nqco4b_142">Combine records from multiple tables:</p><div class="code-block" data-lang="ts">
const usersWithOrders = await db 
  .table('users') 
  .select(['users.name', 'orders.total', 'orders.created_at'])
  .join('orders', 'users.id', '=', 'orders.user_id')
  .get();
</div></section><section class="chapter"><h3 id="left-join" data-toc="left-join">Left Join</h3><p id="nqco4b_144">Include all records from the left table:</p><div class="code-block" data-lang="ts">
const allUsers = await db 
  .table('users')
  .select(['users.name', 'orders.total'])
  .leftJoin('orders', 'users.id', '=', 'orders.user_id') 
  .get();
</div></section><section class="chapter"><h3 id="complex-joins" data-toc="complex-joins">Complex Joins</h3><p id="nqco4b_146">Join multiple tables:</p><div class="code-block" data-lang="ts">
const data = await db 
  .table('users') 
  .select([ 
    'users.name',
    'orders.order_number', 
    'products.name as product_name'
  ]) 
  .join('orders', 'users.id', '=', 'orders.user_id') 
  .join('order_items', 'orders.id', '=', 'order_items.order_id') 
  .join('products', 'order_items.product_id', '=', 'products.id') 
  .get();
</div></section></section><section class="chapter"><h2 id="grouping-results" data-toc="grouping-results">Grouping Results</h2><section class="chapter"><h3 id="group-by" data-toc="group-by">Group By</h3><p id="nqco4b_150">Group records by column values:</p><div class="code-block" data-lang="ts">
const usersByCountry = await db 
  .table('users') 
  .select(['country', 'COUNT(*) as total']) 
  .groupBy('country') 
  .get();
</div></section><section class="chapter"><h3 id="having" data-toc="having">Having</h3><p id="nqco4b_152">Filter grouped results:</p><div class="code-block" data-lang="ts">
const popularCategories = await db 
  .table('products') 
  .select(['category', 'COUNT(*) as product_count']) 
  .groupBy('category') 
  .having('product_count', '&gt;', 10) 
  .get();
</div></section></section><section class="chapter"><h2 id="insert-operations" data-toc="insert-operations">Insert Operations</h2><section class="chapter"><h3 id="inserting-records" data-toc="inserting-records">Inserting Records</h3><p id="nqco4b_156">Add new records to the database:</p><div class="code-block" data-lang="ts">
// Insert single record 
const userId = await db
  .table('users') 
  .insert({
    name: 'Jane Doe',
    email: 'jane@example.com', 
    active: true }
  );
console.log(`Created user with ID: ${userId}`);
</div></section><section class="chapter"><h3 id="batch-inserts" data-toc="batch-inserts">Batch Inserts</h3><p id="nqco4b_158">Insert multiple records at once:</p><div class="code-block" data-lang="ts">
const ids = await db 
  .table('users') 
  .insertMany([ 
    { name: 'Alice', email: 'alice@example.com' }, 
    { name: 'Bob', email: 'bob@example.com' }, 
    { name: 'Carol', email: 'carol@example.com' } 
  ]);
</div></section></section><section class="chapter"><h2 id="update-operations" data-toc="update-operations">Update Operations</h2><section class="chapter"><h3 id="updating-records" data-toc="updating-records">Updating Records</h3><p id="nqco4b_162">Modify existing records:</p><div class="code-block" data-lang="ts">
// Update with conditions 
const affected = await db
  .table('users') 
  .where('id', '=', 1) 
  .update({
    name: 'Updated Name', 
    updated_at: new Date() 
  });
console.log(`Updated ${affected} record(s)`);
</div></section><section class="chapter"><h3 id="increment-and-decrement" data-toc="increment-and-decrement">Increment and Decrement</h3><p id="nqco4b_164">Adjust numeric values:</p><div class="code-block" data-lang="ts">
// Increment a counter 
await db .table('posts') 
  .where('id', '=', 1) 
  .increment('view_count');
// Decrement inventory 
await db 
  .table('products')
  .where('id', '=', 100) 
  .decrement('stock', 5);
</div></section></section><section class="chapter"><h2 id="delete-operations" data-toc="delete-operations">Delete Operations</h2><section class="chapter"><h3 id="deleting-records" data-toc="deleting-records">Deleting Records</h3><p id="nqco4b_168">Remove records from the database:</p><div class="code-block" data-lang="ts">
// Delete with conditions 
const deleted = await db 
  .table('users')
  .where('status', '=', 'inactive') 
  .where('last_login', '&lt;', cutoffDate)
  .delete();
</div></section><section class="chapter"><h3 id="truncate-table" data-toc="truncate-table">Truncate Table</h3><p id="nqco4b_170">Remove all records from a table:</p><div class="code-block" data-lang="ts">
await db.table('sessions').truncate();
</div></section></section><section class="chapter"><h2 id="raw-expressions" data-toc="raw-expressions">Raw Expressions</h2><section class="chapter"><h3 id="using-raw-sql" data-toc="using-raw-sql">Using Raw SQL</h3><p id="nqco4b_173">Include raw SQL in your queries when needed:</p><div class="code-block" data-lang="ts">
const results = await db
  .table('orders') 
  .select([ 'id', 'total', db.raw('DATE(created_at) as order_date') ])
  .get();
</div></section></section><section class="chapter"><h2 id="query-debugging" data-toc="query-debugging">Query Debugging</h2><section class="chapter"><h3 id="getting-the-sql" data-toc="getting-the-sql">Getting the SQL</h3><p id="nqco4b_176">View the generated SQL query:</p><div class="code-block" data-lang="ts">
const query = db 
  .table('users') 
  .where('status', '=', 'active') 
  .orderBy('created_at', 'DESC') 
  .limit(10);
// Get the SQL and parameters 
const { sql, bindings } = query.toSql();
console.log('SQL:', sql); 
console.log('Bindings:', bindings);
</div></section></section><section class="chapter"><h2 id="best-practices" data-toc="best-practices">Best Practices</h2><ol class="list _decimal" id="nqco4b_178" type="1"><li class="list__item" id="nqco4b_179"><p id="nqco4b_185"><span class="control" id="nqco4b_186">Use Parameter Binding</span> - Always use the query builder's methods instead of string concatenation</p></li><li class="list__item" id="nqco4b_180"><p id="nqco4b_187"><span class="control" id="nqco4b_188">Select Specific Columns</span> - Only retrieve the columns you need to improve performance</p></li><li class="list__item" id="nqco4b_181"><p id="nqco4b_189"><span class="control" id="nqco4b_190">Index Your Conditions</span> - Ensure columns used in <code class="code" id="nqco4b_191">where</code> clauses are properly indexed</p></li><li class="list__item" id="nqco4b_182"><p id="nqco4b_192"><span class="control" id="nqco4b_193">Use Pagination</span> - Limit large result sets with <code class="code" id="nqco4b_194">limit</code> and <code class="code" id="nqco4b_195">offset</code></p></li><li class="list__item" id="nqco4b_183"><p id="nqco4b_196"><span class="control" id="nqco4b_197">Leverage Aggregate Functions</span> - Use database-level aggregation instead of processing in application code</p></li><li class="list__item" id="nqco4b_184"><p id="nqco4b_198"><span class="control" id="nqco4b_199">Monitor Query Performance</span> - Use <code class="code" id="nqco4b_200">toSql()</code> to review and optimize complex queries</p></li></ol></section><section class="chapter"><h2 id="next-steps" data-toc="next-steps">Next Steps</h2><ul class="list _bullet" id="nqco4b_201"><li class="list__item" id="nqco4b_202"><p id="nqco4b_205">Learn about <a href="migrations.html" id="nqco4b_206" data-tooltip="Database migrations are version control for your database schema. They allow your team to define, share, and track changes to the database structure over time. With migrations, you can:">Migrations</a> to manage your database schema</p></li><li class="list__item" id="nqco4b_203"><p id="nqco4b_207">Explore <a href="elegant-getting-started.html" id="nqco4b_208" data-tooltip="The Elegant ORM (Object-Relational Mapper) transforms database tables into intuitive TypeScript classes, letting you work with database records as objects rather than writing raw SQL. This object-oriented approach makes your code more maintainable, readable, and enjoyable to write.">Elegant ORM</a> for model-based database interactions</p></li><li class="list__item" id="nqco4b_204"><p id="nqco4b_209">Review <a href="getting-started.html" id="nqco4b_210" data-tooltip="Modern applications depend on reliable, efficient database interactions. Elegant simplifies this process by providing a clean, expressive interface for working with databases. Whether you need raw SQL power, a fluent query builder, or an elegant ORM, this toolkit has you covered.">database configuration</a> options</p></li></ul></section><div class="last-modified">23 October 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="getting-started.html" class="navigation-links__prev">Database: Getting Started</a><a href="migrations.html" class="navigation-links__next">Database: Migrations</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>